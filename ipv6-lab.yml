name: ipv6-ws

topology:

  kinds: 

    srl:
      image: ghcr.io/nokia/srlinux:23.10.1
      type: ixrd2l

    linux:
      image: ghcr.io/hellt/network-multitool

  nodes:

  ### ROUTERS ###

    Rbackbone:
      kind: srl
      startup-config: configs/Rbackbone.json

    R1:
      kind: linux
      image: quay.io/frrouting/frr:8.4.1
      binds:
        - configs/R1-frr.conf:/etc/frr/frr.conf
        - configs/R1-frr-daemons.cfg:/etc/frr/daemons

    R2: 
      kind: linux
      image: quay.io/openbgpd/openbgpd:7.9
#      binds:
#        - configs/openbgpd.conf:/etc/bgpd/bgpd.conf
#      exec:
#        - "ip address add dev eth1 192.168.0.3/24"

    R3:
      kind: srl
      startup-config: configs/R3.json

  ### CLIENTS AND SERVERS ###

    C1:
      kind: linux
      #exec:
      #  - ip address add 172.17.0.1/24 dev eth1
      #  - ip -6 address add 2002::172:17:0:1/96 dev eth1

    C2:
      kind: linux
      #exec:
      #  - ip address add 172.17.0.1/24 dev eth1
      #  - ip -6 address add 2002::172:17:0:1/96 dev eth1

    C3:
      kind: linux
      #exec:
      #  - ip address add 172.17.0.1/24 dev eth1
      #  - ip -6 address add 2002::172:17:0:1/96 dev eth1

    Server:
      kind: linux
      #exec:
      #  - ip address add 172.17.0.1/24 dev eth1
      #  - ip -6 address add 2002::172:17:0:1/96 dev eth1
  links:
    - endpoints: ["Rbackbone:e1-1", "R1:eth1"]
    - endpoints: ["Rbackbone:e1-2", "R2:eth1"]
    - endpoints: ["Rbackbone:e1-3", "R3:e1-1"]
    - endpoints: ["Rbackbone:e1-4", "Server:eth1"]
    - endpoints: ["R1:eth2", "C1:eth1"]
    - endpoints: ["R2:eth2", "C2:eth1"]
    - endpoints: ["R3:e1-2", "C3:eth1"]

